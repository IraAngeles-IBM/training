language: go
go: 1.13.x

services:
- docker

install:
- curl -sL https://ibm.biz/idt-installer | bash
- echo "" > trainer/.env
- cd trainer && make setup
- cd trainer && make build

jobs:
  include:
    - stage: test
      script: cd trainer && make run_classification
    - stage: test
      script: cd trainer && make run_localization
    # - stage: deploy
    #   deploy:
    #   - provider: script
    #     skip_cleanup: true
    #     script: ./release.sh
    #     on:
    #       tags: true
    #       condition: $TRAVIS_OS_NAME = linux

    #   - provider: script
    #     skip_cleanup: true
    #     script: export DEPLOY_TO=production && cd docs && ./deploy.sh
    #     on:
    #       branch: master